<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="/static/jquery.terminal-0.7.5.min.js"></script>
  <link href="/static/jquery.terminal.css" rel="stylesheet"/>
</head>

<body>

<div id="terminal"></div>

<script>

$(document).ready(function() {  
    if(!("WebSocket" in window)){  
       console.log("Browser doesn't support websocket");
    } else {  
      //The user has WebSockets  
      console.log("Launching connect");
      
      var socket;

      function connect(){ 
        console.log("Within connect");
        //the connect function code is below  
        try {  
          var host = "ws://127.0.0.1:1337";  
          socket = new WebSocket(host);  
          socket.onopen = function(){  
            console.log('Open');  
            jQuery(function($, undefined) {
        $('#terminal').terminal(function(command, term) {
          if (command !== '') {
              term.echo(String(command));
              socket.send(String(command));
          }
        }, {
          greetings: '',
          name: '',
          height: 200,
          width: 450,
          prompt: '> '});
      });
          }  
      
          socket.onmessage = function(msg){  
            console.log("got data : " + msg.data);
          }  
      
          socket.onclose = function(){  
            console.log('Closed');  
          }
    
        } catch(exception){  
          console.log("Error" + exception);  
        }
      }

      

      connect();

    }  
});  












  // function connect() {
  //   ws = new WebSocket("ws://localhost:1337");
  //   ws.onmessage = function(evt) { $("#msg").append("<p>"+evt.data+"</p>"); };
  //   ws.onclose = function() { console.log("socket closed"); };
  //   ws.onopen = function() {
  //     console.log("connected...");
  //   };
  //   console.log("Done");

  // }

  // connect();
  // console.log("Done");
  
  // console.log("Launching websocket");
  // var connection = new WebSocket('ws://localhost:1337');
  // // When the connection is open, send some data to the server
  // connection.onopen = function () {
  //   console.log('On open');
  //   jQuery(function($, undefined) {
  //     $('#terminal').terminal(function(command, term) {
  //       if (command !== '') {
  //           term.echo(String(command));
  //           //connection.send(String(command));
  //       }
  //     }, {
  //       greetings: '',
  //       name: '',
  //       height: 200,
  //       width: 450,
  //       prompt: '> '});
  //   });

  //   connection.send('Ping'); // Send the message 'Ping' to the server
  // };
  
  // // Log errors
  // connection.onerror = function (error) {
  //   console.log('WebSocket Error ' + JSON.stringify(error));
  // };
  
  // // Log messages from the server
  // connection.onmessage = function (e) {
  //   console.log('Server: ' + e.data);
  // };

  // console.log("Done");

</script>

<h1> MY SOCKET </h1>

</body>
</html>

